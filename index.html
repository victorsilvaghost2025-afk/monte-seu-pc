<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monte Seu PC</title>
  <style>
    body {
      background: radial-gradient(circle at top, #02101f, #000);
      color: #e0f3ff;
      font-family: "Poppins", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 40px 20px;
    }

    h1 {
      color: #00aaff;
      font-size: 2.2rem;
      margin-bottom: 20px;
    }

    .container {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 20px;
      padding: 30px;
      width: 100%;
      max-width: 900px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      font-weight: 600;
      color: #8ad0ff;
      margin-bottom: 6px;
    }

    select, input {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      background-color: #0b1b2e;
      color: #e0f3ff;
      font-size: 1rem;
      outline: none;
      box-shadow: 0 0 10px #004e9f88 inset;
    }

    button {
      width: 100%;
      background: linear-gradient(90deg, #009dff, #00ddff);
      border: none;
      color: white;
      padding: 15px;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      letter-spacing: 1px;
      transition: 0.3s;
    }

    button:hover {
      transform: scale(1.02);
      box-shadow: 0 0 25px #00d0ff;
    }

    .builds {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }

    .card {
      background: #061624;
      border-radius: 15px;
      width: 270px;
      padding: 20px;
      transition: 0.3s;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 25px #00c6ff99;
    }

    .card h3 {
      color: #00aaff;
      font-size: 1.3rem;
      margin-bottom: 10px;
      text-align: center;
    }

    .card p {
      margin: 5px 0;
      line-height: 1.4;
    }

    .total {
      text-align: center;
      font-weight: bold;
      font-size: 1.1rem;
      color: #00d0ff;
      margin-top: 10px;
      border-top: 1px solid #00d0ff55;
      padding-top: 8px;
    }

    #nivelDesempenho {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <h1>Monte Seu PC</h1>
  <div class="container">
    <div class="form-group">
      <label for="objetivo">Para qual objetivo ser√° o PC?</label>
      <select id="objetivo">
        <option value="">Selecione</option>
        <option value="games">Games</option>
        <option value="trabalho">Trabalho</option>
        <option value="edicao">Edi√ß√£o</option>
        <option value="render">Render</option>
      </select>
    </div>

    <div class="form-group" id="nivelDesempenho">
      <label for="nivel">Qual o n√≠vel de desempenho?</label>
      <select id="nivel">
        <option value="2">B√°sico</option>
        <option value="3">Intermedi√°rio</option>
        <option value="5">Avan√ßado</option>
      </select>
    </div>

    <div class="form-group">
      <label for="orcamento">Qual √© o or√ßamento m√°ximo (R$)?</label>
      <input type="number" id="orcamento" placeholder="Ex: 6000" />
    </div>

    <button id="gerar">Gerar Builds</button>

    <div class="builds" id="resultado"></div>
  </div>

  <script>
    const objetivoSelect = document.getElementById("objetivo");
    const nivelDesempenhoDiv = document.getElementById("nivelDesempenho");
    const gerarBtn = document.getElementById("gerar");
    const resultadoDiv = document.getElementById("resultado");

    objetivoSelect.addEventListener("change", () => {
      if (objetivoSelect.value === "games") {
        nivelDesempenhoDiv.style.display = "block";
      } else {
        nivelDesempenhoDiv.style.display = "none";
      }
    });

    gerarBtn.addEventListener("click", async () => {
      const objetivo = objetivoSelect.value;
      const orcamento = parseFloat(document.getElementById("orcamento").value);

      if (!objetivo || !orcamento) {
        alert("Por favor, selecione o objetivo e informe o or√ßamento.");
        return;
      }

      const resposta = await fetch("componentes.json");
      const componentes = await resposta.json();

      const filtrados = componentes.filter(c => c.objetivos.includes(objetivo));
      if (filtrados.length === 0) {
        resultadoDiv.innerHTML = "<p>Nenhum componente compat√≠vel encontrado.</p>";
        return;
      }

      // Fun√ß√£o para montar build
      function montarBuild(fator) {
        let build = [];
        let total = 0;

        const tipos = ["CPU", "GPU", "RAM", "Armazenamento", "Fonte", "Gabinete"];
        tipos.forEach(tipo => {
          const opcoes = filtrados.filter(c => c.tipo === tipo);
          if (opcoes.length > 0) {
            // Ordena pelo desempenho e ajusta pela build
            let selecionado;
            if (fator === "economica") selecionado = opcoes.find(c => c.desempenho <= 3) || opcoes[0];
            else if (fator === "intermediaria") selecionado = opcoes.find(c => c.desempenho >= 3 && c.desempenho <= 4) || opcoes[0];
            else selecionado = opcoes.find(c => c.desempenho >= 5) || opcoes[opcoes.length - 1];
            build.push(selecionado);
            total += selecionado.preco;
          }
        });

        return { build, total };
      }

      const builds = [
        { nome: "üí∞ Econ√¥mica", fator: "economica" },
        { nome: "‚öôÔ∏è Intermedi√°ria", fator: "intermediaria" },
        { nome: "üöÄ Ultra", fator: "ultra" }
      ];

      resultadoDiv.innerHTML = "";

      builds.forEach(b => {
        const { build, total } = montarBuild(b.fator);

        let aviso = "";
        if (b.fator === "ultra" && total > orcamento) {
          aviso = `<p style="color:#ff7070;">‚ö†Ô∏è O or√ßamento atual √© insuficiente para a build Ultra.</p>`;
        }

        const html = `
          <div class="card">
            <h3>${b.nome}</h3>
            ${build.map(c => `<p><strong>${c.tipo}:</strong> ${c.nome} ‚Äî R$ ${c.preco.toLocaleString("pt-BR")}</p>`).join("")}
            <div class="total">üí∞ Total: R$ ${total.toLocaleString("pt-BR")}</div>
            ${aviso}
          </div>
        `;
        resultadoDiv.innerHTML += html;
      });
    });
  </script>
</body>
</html>
